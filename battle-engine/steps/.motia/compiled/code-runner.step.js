import { connectDB } from "../src/db.js";
import { MatchModel } from "../src/models/Match.js";
import Question from "../src/models/Question.js";
import { languages } from "../src/utils/lang.js";
const config = {
  name: "CodeRunner",
  type: "event",
  subscribes: ["run.code"],
  emits: ["code.processed"],
  flows: ["CodeDuelFlow"]
};
var Verdict = /* @__PURE__ */ ((Verdict2) => {
  Verdict2["ACCEPTED"] = "Accepted";
  Verdict2["WRONG_ANSWER"] = "Wrong Answer";
  Verdict2["COMPILE_ERROR"] = "Compilation Error";
  Verdict2["RUNTIME_ERROR"] = "Runtime Error";
  return Verdict2;
})(Verdict || {});
const sleep = (ms) => new Promise((resolve) => setTimeout(resolve, ms));
const handler = async (event, { emit, logger }) => {
  await connectDB();
  const data = event.data || event;
  const { matchId, playerId, code, action, language = "python", version = "3.10.0" } = data;
  let overallSuccess = true;
  let errorMsg = void 0;
  const testResults = [];
  try {
    const match = await MatchModel.findOne({ matchId });
    if (!match) throw new Error("Match not found");
    if (action === "SUBMIT_SOLUTION" && match.status !== "RACING") {
      throw new Error(`Cannot submit. Match is ${match.status}`);
    }
    const question = await Question.findById(match.problemId);
    if (!question) throw new Error("Question not found");
    let casesToRun = question.test_cases;
    if (action === "RUN_TESTS") {
      const limit = Math.ceil(casesToRun.length * 0.25) || 1;
      casesToRun = casesToRun.slice(0, limit);
      logger.info(`JUDGE: Running subset (${limit}/${question.test_cases.length}) for ${playerId}`);
    } else {
      logger.info(`JUDGE: Running ALL (${casesToRun.length}) for ${playerId} submission`);
    }
    for (let i = 0; i < casesToRun.length; i++) {
      const testCase = casesToRun[i];
      const result = await runPiston(code, language, version, testCase, logger);
      const caseResult = {
        id: i + 1,
        input: testCase.input,
        expected: testCase.output,
        actual: result.output || result.stderr,
        status: result.status,
        passed: result.status === "Accepted" /* ACCEPTED */
      };
      testResults.push(caseResult);
      if (result.status !== "Accepted" /* ACCEPTED */) {
        overallSuccess = false;
        if (result.status === "Compilation Error" /* COMPILE_ERROR */) {
          errorMsg = result.stderr;
          break;
        }
      }
      if (i < casesToRun.length - 1) await sleep(300);
    }
  } catch (err) {
    overallSuccess = false;
    errorMsg = err.message || "System Error";
    logger.error(`RUNNER ERROR: ${errorMsg}`);
  }
  const resultData = {
    matchId,
    playerId,
    action,
    success: overallSuccess && !errorMsg,
    error: errorMsg,
    results: testResults
  };
  logger.info(`VERDICT for ${playerId}: ${resultData.success ? "PASSED" : "FAILED"}`);
  await emit({ topic: "code.processed", data: resultData });
};
async function runPiston(code, language, version, testCase, logger) {
  const pistonLang = languages.find((lang) => lang.pistonLang == language)?.pistonLang;
  const ver = languages.find((lang) => lang.pistonLang == language)?.version;
  const payload = {
    language: pistonLang,
    version: ver || "*",
    files: [{ name: "main", content: code }],
    stdin: testCase.input,
    run_timeout: 3e3,
    compile_timeout: 1e4
  };
  try {
    const response = await fetch("https://emkc.org/api/v2/piston/execute", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(payload)
    });
    if (!response.ok) {
      const text = await response.text();
      if (logger) logger.error(`PISTON HTTP ERROR ${response.status}: ${text}`);
      return { status: "Runtime Error" /* RUNTIME_ERROR */, stderr: `API HTTP ${response.status}: ${text}` };
    }
    const data = await response.json();
    if (data.message) return { status: "Runtime Error" /* RUNTIME_ERROR */, stderr: data.message };
    if (data.compile && data.compile.code !== 0) return { status: "Compilation Error" /* COMPILE_ERROR */, stderr: data.compile.stderr };
    if (data.run && data.run.code !== 0) return { status: "Runtime Error" /* RUNTIME_ERROR */, stderr: data.run.stderr || `Exited with code ${data.run.code}` };
    const actual = (data.run.stdout || "").trim();
    const expected = testCase.output.map((o) => o.trim());
    const isCorrect = expected.includes(actual);
    return { status: isCorrect ? "Accepted" /* ACCEPTED */ : "Wrong Answer" /* WRONG_ANSWER */, output: actual };
  } catch (e) {
    if (logger) logger.error("PISTON EXCEPTION:", e.message);
    return { status: "Runtime Error" /* RUNTIME_ERROR */, stderr: `API Exception: ${e.message}` };
  }
}
export {
  config,
  handler
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vY29kZS1ydW5uZXIuc3RlcC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgU3RlcENvbmZpZyB9IGZyb20gJ21vdGlhJztcclxuaW1wb3J0IHsgY29ubmVjdERCIH0gZnJvbSAnLi4vc3JjL2RiJztcclxuaW1wb3J0IHsgTWF0Y2hNb2RlbCB9IGZyb20gJy4uL3NyYy9tb2RlbHMvTWF0Y2gnO1xyXG5pbXBvcnQgeyBSdW5uZXJSZXF1ZXN0LCBSdW5uZXJSZXN1bHQgfSBmcm9tICcuLi9zcmMvdHlwZXMnO1xyXG5pbXBvcnQgUXVlc3Rpb24gZnJvbSAnLi4vc3JjL21vZGVscy9RdWVzdGlvbic7XHJcbmltcG9ydCB7IGxhbmd1YWdlcyB9IGZyb20gJy4uL3NyYy91dGlscy9sYW5nJztcclxuXHJcbmV4cG9ydCBjb25zdCBjb25maWc6IFN0ZXBDb25maWcgPSB7XHJcbiAgbmFtZTogJ0NvZGVSdW5uZXInLFxyXG4gIHR5cGU6ICdldmVudCcsXHJcbiAgc3Vic2NyaWJlczogWydydW4uY29kZSddLFxyXG4gIGVtaXRzOiBbJ2NvZGUucHJvY2Vzc2VkJ10sXHJcbiAgZmxvd3M6IFsnQ29kZUR1ZWxGbG93J11cclxufTtcclxuXHJcbmVudW0gVmVyZGljdCB7XHJcbiAgQUNDRVBURUQgPSBcIkFjY2VwdGVkXCIsXHJcbiAgV1JPTkdfQU5TV0VSID0gXCJXcm9uZyBBbnN3ZXJcIixcclxuICBDT01QSUxFX0VSUk9SID0gXCJDb21waWxhdGlvbiBFcnJvclwiLFxyXG4gIFJVTlRJTUVfRVJST1IgPSBcIlJ1bnRpbWUgRXJyb3JcIixcclxufVxyXG5cclxuY29uc3Qgc2xlZXAgPSAobXM6IG51bWJlcikgPT4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcclxuXHJcbmV4cG9ydCBjb25zdCBoYW5kbGVyID0gYXN5bmMgKGV2ZW50OiBhbnksIHsgZW1pdCwgbG9nZ2VyIH06IGFueSkgPT4ge1xyXG4gIGF3YWl0IGNvbm5lY3REQigpO1xyXG5cclxuICBjb25zdCBkYXRhID0gKGV2ZW50LmRhdGEgfHwgZXZlbnQpIGFzIFJ1bm5lclJlcXVlc3QgJiB7IGxhbmd1YWdlPzogc3RyaW5nLCB2ZXJzaW9uPzogc3RyaW5nIH07XHJcbiAgY29uc3QgeyBtYXRjaElkLCBwbGF5ZXJJZCwgY29kZSwgYWN0aW9uLCBsYW5ndWFnZSA9IFwicHl0aG9uXCIsIHZlcnNpb24gPSBcIjMuMTAuMFwiIH0gPSBkYXRhO1xyXG5cclxuICBsZXQgb3ZlcmFsbFN1Y2Nlc3MgPSB0cnVlO1xyXG4gIGxldCBlcnJvck1zZyA9IHVuZGVmaW5lZDtcclxuICBjb25zdCB0ZXN0UmVzdWx0czogYW55W10gPSBbXTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IG1hdGNoID0gYXdhaXQgTWF0Y2hNb2RlbC5maW5kT25lKHsgbWF0Y2hJZCB9KTtcclxuICAgIGlmICghbWF0Y2gpIHRocm93IG5ldyBFcnJvcihcIk1hdGNoIG5vdCBmb3VuZFwiKTtcclxuXHJcbiAgICAvLyBcdUQ4M0RcdURFRDEgU0FGRVRZIENIRUNLOlxyXG4gICAgLy8gSWYgdGhleSBhcmUgdHJ5aW5nIHRvIHN1Ym1pdCB0byB3aW4sIGJ1dCB0aGUgbWF0Y2ggaXNuJ3QgUkFDSU5HIChlLmcuIEV4cGlyZWQpLCBmYWlsIGZhc3QuXHJcbiAgICBpZiAoYWN0aW9uID09PSAnU1VCTUlUX1NPTFVUSU9OJyAmJiBtYXRjaC5zdGF0dXMgIT09ICdSQUNJTkcnKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3Qgc3VibWl0LiBNYXRjaCBpcyAke21hdGNoLnN0YXR1c31gKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBxdWVzdGlvbiA9IGF3YWl0IFF1ZXN0aW9uLmZpbmRCeUlkKG1hdGNoLnByb2JsZW1JZCk7XHJcbiAgICBpZiAoIXF1ZXN0aW9uKSB0aHJvdyBuZXcgRXJyb3IoXCJRdWVzdGlvbiBub3QgZm91bmRcIik7XHJcblxyXG4gICAgbGV0IGNhc2VzVG9SdW4gPSBxdWVzdGlvbi50ZXN0X2Nhc2VzO1xyXG4gICAgXHJcbiAgICBpZiAoYWN0aW9uID09PSAnUlVOX1RFU1RTJykge1xyXG4gICAgICAgIC8vIFJ1biBzdWJzZXQgZm9yIHF1aWNrIGZlZWRiYWNrXHJcbiAgICAgICAgY29uc3QgbGltaXQgPSBNYXRoLmNlaWwoY2FzZXNUb1J1bi5sZW5ndGggKiAwLjI1KSB8fCAxOyBcclxuICAgICAgICBjYXNlc1RvUnVuID0gY2FzZXNUb1J1bi5zbGljZSgwLCBsaW1pdCk7XHJcbiAgICAgICAgbG9nZ2VyLmluZm8oYEpVREdFOiBSdW5uaW5nIHN1YnNldCAoJHtsaW1pdH0vJHtxdWVzdGlvbi50ZXN0X2Nhc2VzLmxlbmd0aH0pIGZvciAke3BsYXllcklkfWApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBsb2dnZXIuaW5mbyhgSlVER0U6IFJ1bm5pbmcgQUxMICgke2Nhc2VzVG9SdW4ubGVuZ3RofSkgZm9yICR7cGxheWVySWR9IHN1Ym1pc3Npb25gKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0gUElTVE9OIEVYRUNVVElPTiBMT09QIC0tLVxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjYXNlc1RvUnVuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgdGVzdENhc2UgPSBjYXNlc1RvUnVuW2ldO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJ1blBpc3Rvbihjb2RlLCBsYW5ndWFnZSwgdmVyc2lvbiwgdGVzdENhc2UsIGxvZ2dlcik7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhc2VSZXN1bHQgPSB7XHJcbiAgICAgICAgICAgIGlkOiBpICsgMSxcclxuICAgICAgICAgICAgaW5wdXQ6IHRlc3RDYXNlLmlucHV0LFxyXG4gICAgICAgICAgICBleHBlY3RlZDogdGVzdENhc2Uub3V0cHV0LFxyXG4gICAgICAgICAgICBhY3R1YWw6IHJlc3VsdC5vdXRwdXQgfHwgcmVzdWx0LnN0ZGVycixcclxuICAgICAgICAgICAgc3RhdHVzOiByZXN1bHQuc3RhdHVzLFxyXG4gICAgICAgICAgICBwYXNzZWQ6IHJlc3VsdC5zdGF0dXMgPT09IFZlcmRpY3QuQUNDRVBURURcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRlc3RSZXN1bHRzLnB1c2goY2FzZVJlc3VsdCk7XHJcblxyXG4gICAgICAgIGlmIChyZXN1bHQuc3RhdHVzICE9PSBWZXJkaWN0LkFDQ0VQVEVEKSB7XHJcbiAgICAgICAgICAgIG92ZXJhbGxTdWNjZXNzID0gZmFsc2U7XHJcbiAgICAgICAgICAgIC8vIEZvciBzdWJtaXNzaW9uLCB3ZSBjYW4gYnJlYWsgZWFybHkgb24gZmFpbHVyZSB0byBzYXZlIHRpbWVcclxuICAgICAgICAgICAgLy8gQnV0IHVzdWFsbHksIHVzZXJzIGxpa2UgdG8gc2VlIHdoaWNoIHRlc3RzIHBhc3NlZCwgc28gd2UgbWlnaHQga2VlcCBydW5uaW5nLlxyXG4gICAgICAgICAgICAvLyBIZXJlIHdlIGJyZWFrIG9uIENPTVBJTEVfRVJST1Igb25seS5cclxuICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFZlcmRpY3QuQ09NUElMRV9FUlJPUikge1xyXG4gICAgICAgICAgICAgICAgZXJyb3JNc2cgPSByZXN1bHQuc3RkZXJyO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7IFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTbGlnaHQgZGVsYXkgdG8gYmUgbmljZSB0byB0aGUgZnJlZSBBUElcclxuICAgICAgICBpZiAoaSA8IGNhc2VzVG9SdW4ubGVuZ3RoIC0gMSkgYXdhaXQgc2xlZXAoMzAwKTtcclxuICAgIH1cclxuXHJcbiAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcclxuICAgIG92ZXJhbGxTdWNjZXNzID0gZmFsc2U7XHJcbiAgICBlcnJvck1zZyA9IGVyci5tZXNzYWdlIHx8IFwiU3lzdGVtIEVycm9yXCI7XHJcbiAgICBsb2dnZXIuZXJyb3IoYFJVTk5FUiBFUlJPUjogJHtlcnJvck1zZ31gKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHJlc3VsdERhdGEgPSB7XHJcbiAgICBtYXRjaElkLFxyXG4gICAgcGxheWVySWQsXHJcbiAgICBhY3Rpb246IGFjdGlvbiBhcyAnUlVOX1RFU1RTJyB8ICdTVUJNSVRfU09MVVRJT04nLFxyXG4gICAgc3VjY2Vzczogb3ZlcmFsbFN1Y2Nlc3MgJiYgIWVycm9yTXNnLFxyXG4gICAgZXJyb3I6IGVycm9yTXNnLFxyXG4gICAgcmVzdWx0czogdGVzdFJlc3VsdHNcclxuICB9O1xyXG5cclxuICBsb2dnZXIuaW5mbyhgVkVSRElDVCBmb3IgJHtwbGF5ZXJJZH06ICR7cmVzdWx0RGF0YS5zdWNjZXNzID8gXCJQQVNTRURcIiA6IFwiRkFJTEVEXCJ9YCk7XHJcbiAgYXdhaXQgZW1pdCh7IHRvcGljOiAnY29kZS5wcm9jZXNzZWQnLCBkYXRhOiByZXN1bHREYXRhIH0pO1xyXG59O1xyXG5cclxuLy8gLS0tIEhFTFBFUiBGVU5DVElPTiAtLS1cclxuYXN5bmMgZnVuY3Rpb24gcnVuUGlzdG9uKGNvZGU6IHN0cmluZywgbGFuZ3VhZ2U6IHN0cmluZywgdmVyc2lvbjogc3RyaW5nLCB0ZXN0Q2FzZTogYW55LCBsb2dnZXI/OiBhbnkpIHtcclxuICAgIGNvbnN0IHBpc3RvbkxhbmcgPSBsYW5ndWFnZXMuZmluZCgobGFuZyk9PmxhbmcucGlzdG9uTGFuZyA9PSBsYW5ndWFnZSk/LnBpc3RvbkxhbmdcclxuICAgIGNvbnN0IHZlciA9IGxhbmd1YWdlcy5maW5kKChsYW5nKT0+bGFuZy5waXN0b25MYW5nID09IGxhbmd1YWdlKT8udmVyc2lvbjtcclxuXHJcbiAgICBjb25zdCBwYXlsb2FkID0ge1xyXG4gICAgICAgIGxhbmd1YWdlOiBwaXN0b25MYW5nLFxyXG4gICAgICAgIHZlcnNpb246IHZlciB8fCBcIipcIixcclxuICAgICAgICBmaWxlczogW3sgbmFtZTogJ21haW4nLCBjb250ZW50OiBjb2RlIH1dLFxyXG4gICAgICAgIHN0ZGluOiB0ZXN0Q2FzZS5pbnB1dCxcclxuICAgICAgICBydW5fdGltZW91dDogMzAwMCxcclxuICAgICAgICBjb21waWxlX3RpbWVvdXQ6IDEwMDAwLFxyXG4gICAgfTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXCJodHRwczovL2Vta2Mub3JnL2FwaS92Mi9waXN0b24vZXhlY3V0ZVwiLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZCksXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcclxuICAgICAgICAgICAgaWYgKGxvZ2dlcikgbG9nZ2VyLmVycm9yKGBQSVNUT04gSFRUUCBFUlJPUiAke3Jlc3BvbnNlLnN0YXR1c306ICR7dGV4dH1gKTtcclxuICAgICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBWZXJkaWN0LlJVTlRJTUVfRVJST1IsIHN0ZGVycjogYEFQSSBIVFRQICR7cmVzcG9uc2Uuc3RhdHVzfTogJHt0ZXh0fWAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGRhdGE6IGFueSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuXHJcbiAgICAgICAgaWYgKGRhdGEubWVzc2FnZSkgcmV0dXJuIHsgc3RhdHVzOiBWZXJkaWN0LlJVTlRJTUVfRVJST1IsIHN0ZGVycjogZGF0YS5tZXNzYWdlIH07XHJcbiAgICAgICAgaWYgKGRhdGEuY29tcGlsZSAmJiBkYXRhLmNvbXBpbGUuY29kZSAhPT0gMCkgcmV0dXJuIHsgc3RhdHVzOiBWZXJkaWN0LkNPTVBJTEVfRVJST1IsIHN0ZGVycjogZGF0YS5jb21waWxlLnN0ZGVyciB9O1xyXG4gICAgICAgIGlmIChkYXRhLnJ1biAmJiBkYXRhLnJ1bi5jb2RlICE9PSAwKSByZXR1cm4geyBzdGF0dXM6IFZlcmRpY3QuUlVOVElNRV9FUlJPUiwgc3RkZXJyOiBkYXRhLnJ1bi5zdGRlcnIgfHwgYEV4aXRlZCB3aXRoIGNvZGUgJHtkYXRhLnJ1bi5jb2RlfWAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgYWN0dWFsID0gKGRhdGEucnVuLnN0ZG91dCB8fCBcIlwiKS50cmltKCk7XHJcbiAgICAgICAgY29uc3QgZXhwZWN0ZWQgPSB0ZXN0Q2FzZS5vdXRwdXQubWFwKChvOiBzdHJpbmcpID0+IG8udHJpbSgpKTtcclxuICAgICAgICBjb25zdCBpc0NvcnJlY3QgPSBleHBlY3RlZC5pbmNsdWRlcyhhY3R1YWwpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiB7IHN0YXR1czogaXNDb3JyZWN0ID8gVmVyZGljdC5BQ0NFUFRFRCA6IFZlcmRpY3QuV1JPTkdfQU5TV0VSLCBvdXRwdXQ6IGFjdHVhbCB9O1xyXG5cclxuICAgIH0gY2F0Y2ggKGU6IGFueSkge1xyXG4gICAgICAgIGlmIChsb2dnZXIpIGxvZ2dlci5lcnJvcihcIlBJU1RPTiBFWENFUFRJT046XCIsIGUubWVzc2FnZSk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBWZXJkaWN0LlJVTlRJTUVfRVJST1IsIHN0ZGVycjogYEFQSSBFeGNlcHRpb246ICR7ZS5tZXNzYWdlfWAgfTtcclxuICAgIH1cclxufSJdLAogICJtYXBwaW5ncyI6ICJBQUNBLFNBQVMsaUJBQWlCO0FBQzFCLFNBQVMsa0JBQWtCO0FBRTNCLE9BQU8sY0FBYztBQUNyQixTQUFTLGlCQUFpQjtBQUVuQixNQUFNLFNBQXFCO0FBQUEsRUFDaEMsTUFBTTtBQUFBLEVBQ04sTUFBTTtBQUFBLEVBQ04sWUFBWSxDQUFDLFVBQVU7QUFBQSxFQUN2QixPQUFPLENB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
