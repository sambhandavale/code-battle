import { connectDB } from "../src/db.js";
import { MatchModel } from "../src/models/Match.js";
import Question from "../src/models/Question.js";
const config = {
  name: "MatchAPI",
  type: "api",
  path: "/match/:action",
  method: "POST",
  emits: ["player.joined", "run.code", "analyze.code"],
  flows: ["CodeDuelFlow"]
};
const handler = async (req, context) => {
  const { emit, logger, streams } = context;
  await connectDB();
  try {
    const action = req.params?.action || req.pathParams?.action;
    const { playerId, matchId, code, language, time } = req.body || {};
    if (action === "create") {
      const newMatchId = matchId || `match_${Date.now()}`;
      let validDuration = 5;
      if (time && [5, 10, 20].includes(time)) {
        validDuration = time;
      }
      const durationMs = validDuration * 60 * 1e3;
      const count = await Question.countDocuments({ time: validDuration });
      if (count === 0) {
        return { status: 500, body: { error: `No questions found for ${validDuration} mins.` } };
      }
      const random = Math.floor(Math.random() * count);
      const randomQuestion = await Question.findOne({ time: validDuration }).skip(random);
      if (!randomQuestion) {
        return { status: 500, body: { error: "Error fetching question." } };
      }
      logger.info(`Creating Match ${newMatchId} with problem: ${randomQuestion.title}`);
      await MatchModel.create({
        matchId: newMatchId,
        players: [playerId],
        status: "WAITING",
        problemId: randomQuestion._id.toString(),
        duration: durationMs
      });
      return {
        status: 200,
        body: {
          matchId: newMatchId,
          msg: "Match Created",
          durationMinutes: validDuration,
          problemTitle: randomQuestion.title
        }
      };
    }
    if (action === "join") {
      let game = await MatchModel.findOneAndUpdate(
        { matchId, status: "WAITING" },
        { $addToSet: { players: playerId } },
        { new: true }
      );
      if (!game) {
        game = await MatchModel.findOne({ matchId });
        if (!game) {
          return { status: 404, body: { error: "Match not found" } };
        }
        const isAlreadyIn = game.players.includes(playerId);
        if (!isAlreadyIn) {
          return { status: 400, body: { error: `Cannot join. Match is ${game.status}` } };
        }
      }
      const problem = await Question.findById(game.problemId);
      logger.info(`DB: Player ${playerId} active in ${matchId}`);
      await emit({ topic: "player.joined", data: { matchId, playerId } });
      if (streams?.match) {
        await streams.match.set(matchId, "message", {
          type: "PLAYER_JOINED",
          playerId,
          players: game.players
        });
      }
      return {
        status: 200,
        body: {
          msg: "Joined",
          state: game,
          durationMs: game.duration,
          problem: { title: problem?.title, description: problem?.description }
        }
      };
    }
    if (action === "submit" || action === "run") {
      const requestType = req.body?.type || (action === "run" ? "RUN_TESTS" : "SUBMIT_SOLUTION");
      const match = await MatchModel.findOne({ matchId });
      if (!match) return { status: 404, body: { error: "Match not found" } };
      if (requestType === "SUBMIT_SOLUTION" && match.status !== "RACING") {
        return { status: 400, body: { error: `Cannot submit. Match is ${match.status}` } };
      }
      const jobData = {
        matchId,
        playerId,
        code,
        action: requestType,
        // @ts-ignore
        language: language || "python",
        version: "3.10.0"
      };
      logger.info(`API: Queueing ${requestType} for ${playerId}`);
      await emit({ topic: "run.code", data: jobData });
      return { status: 200, body: { msg: "Code queued" } };
    }
    if (action === "analyze") {
      const { code: code2, language: language2, problemTitle } = req.body;
      if (!code2) {
        return { status: 400, body: { error: "No code provided for analysis." } };
      }
      await emit({
        topic: "analyze.code",
        data: {
          matchId,
          playerId,
          code: code2,
          language: language2 || "python",
          problemTitle: problemTitle || "Unknown Problem"
        }
      });
      return {
        status: 200,
        body: { msg: "Analysis started. Watch the stream for results." }
      };
    }
    return { status: 400, body: { error: "Invalid Action" } };
  } catch (error) {
    logger.error("API Error", error);
    return { status: 500, body: { error: error.message } };
  }
};
export {
  config,
  handler
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vbWF0Y2gtYXBpLnN0ZXAudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IFN0ZXBDb25maWcgfSBmcm9tICdtb3RpYSc7XHJcbmltcG9ydCB7IGNvbm5lY3REQiB9IGZyb20gJy4uL3NyYy9kYic7XHJcbmltcG9ydCB7IE1hdGNoTW9kZWwgfSBmcm9tICcuLi9zcmMvbW9kZWxzL01hdGNoJztcclxuaW1wb3J0IHsgUnVubmVyUmVxdWVzdCB9IGZyb20gJy4uL3NyYy90eXBlcyc7XHJcbmltcG9ydCBRdWVzdGlvbiBmcm9tICcuLi9zcmMvbW9kZWxzL1F1ZXN0aW9uJztcclxuXHJcbmV4cG9ydCBjb25zdCBjb25maWc6IFN0ZXBDb25maWcgPSB7XHJcbiAgbmFtZTogJ01hdGNoQVBJJyxcclxuICB0eXBlOiAnYXBpJyxcclxuICBwYXRoOiAnL21hdGNoLzphY3Rpb24nLFxyXG4gIG1ldGhvZDogJ1BPU1QnLFxyXG4gIGVtaXRzOiBbJ3BsYXllci5qb2luZWQnLCAncnVuLmNvZGUnLCAnYW5hbHl6ZS5jb2RlJ10sXHJcbiAgZmxvd3M6IFsnQ29kZUR1ZWxGbG93J11cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBoYW5kbGVyID0gYXN5bmMgKHJlcTogYW55LCBjb250ZXh0OiBhbnkpID0+IHtcclxuICBjb25zdCB7IGVtaXQsIGxvZ2dlciwgc3RyZWFtcyB9ID0gY29udGV4dDtcclxuICBhd2FpdCBjb25uZWN0REIoKTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGFjdGlvbiA9IHJlcS5wYXJhbXM/LmFjdGlvbiB8fCByZXEucGF0aFBhcmFtcz8uYWN0aW9uO1xyXG4gICAgY29uc3QgeyBwbGF5ZXJJZCwgbWF0Y2hJZCwgY29kZSwgbGFuZ3VhZ2UsIHRpbWUgfSA9IHJlcS5ib2R5IHx8IHt9O1xyXG5cclxuICAgIGlmIChhY3Rpb24gPT09ICdjcmVhdGUnKSB7XHJcbiAgICAgICAgY29uc3QgbmV3TWF0Y2hJZCA9IG1hdGNoSWQgfHwgYG1hdGNoXyR7RGF0ZS5ub3coKX1gO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCB2YWxpZER1cmF0aW9uID0gNTtcclxuICAgICAgICBpZiAodGltZSAmJiBbNSwgMTAsIDIwXS5pbmNsdWRlcyh0aW1lKSkge1xyXG4gICAgICAgICAgICB2YWxpZER1cmF0aW9uID0gdGltZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgZHVyYXRpb25NcyA9IHZhbGlkRHVyYXRpb24gKiA2MCAqIDEwMDA7XHJcblxyXG4gICAgICAgIGNvbnN0IGNvdW50ID0gYXdhaXQgUXVlc3Rpb24uY291bnREb2N1bWVudHMoeyB0aW1lOiB2YWxpZER1cmF0aW9uIH0pO1xyXG4gICAgICAgIGlmIChjb3VudCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IDUwMCwgYm9keTogeyBlcnJvcjogYE5vIHF1ZXN0aW9ucyBmb3VuZCBmb3IgJHt2YWxpZER1cmF0aW9ufSBtaW5zLmAgfSB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcmFuZG9tID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY291bnQpO1xyXG4gICAgICAgIGNvbnN0IHJhbmRvbVF1ZXN0aW9uID0gYXdhaXQgUXVlc3Rpb24uZmluZE9uZSh7IHRpbWU6IHZhbGlkRHVyYXRpb24gfSkuc2tpcChyYW5kb20pO1xyXG5cclxuICAgICAgICBpZiAoIXJhbmRvbVF1ZXN0aW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogNTAwLCBib2R5OiB7IGVycm9yOiBcIkVycm9yIGZldGNoaW5nIHF1ZXN0aW9uLlwiIH0gfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxvZ2dlci5pbmZvKGBDcmVhdGluZyBNYXRjaCAke25ld01hdGNoSWR9IHdpdGggcHJvYmxlbTogJHtyYW5kb21RdWVzdGlvbi50aXRsZX1gKTtcclxuXHJcbiAgICAgICAgYXdhaXQgTWF0Y2hNb2RlbC5jcmVhdGUoe1xyXG4gICAgICAgICAgICBtYXRjaElkOiBuZXdNYXRjaElkLFxyXG4gICAgICAgICAgICBwbGF5ZXJzOiBbcGxheWVySWRdLFxyXG4gICAgICAgICAgICBzdGF0dXM6ICdXQUlUSU5HJyxcclxuICAgICAgICAgICAgcHJvYmxlbUlkOiByYW5kb21RdWVzdGlvbi5faWQudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uTXNcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4geyBcclxuICAgICAgICAgICAgc3RhdHVzOiAyMDAsIFxyXG4gICAgICAgICAgICBib2R5OiB7IFxyXG4gICAgICAgICAgICAgICAgbWF0Y2hJZDogbmV3TWF0Y2hJZCwgXHJcbiAgICAgICAgICAgICAgICBtc2c6IFwiTWF0Y2ggQ3JlYXRlZFwiLCBcclxuICAgICAgICAgICAgICAgIGR1cmF0aW9uTWludXRlczogdmFsaWREdXJhdGlvbixcclxuICAgICAgICAgICAgICAgIHByb2JsZW1UaXRsZTogcmFuZG9tUXVlc3Rpb24udGl0bGUgXHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoYWN0aW9uID09PSAnam9pbicpIHtcclxuICAgICAgICBsZXQgZ2FtZSA9IGF3YWl0IE1hdGNoTW9kZWwuZmluZE9uZUFuZFVwZGF0ZShcclxuICAgICAgICAgICAgeyBtYXRjaElkLCBzdGF0dXM6ICdXQUlUSU5HJyB9LFxyXG4gICAgICAgICAgICB7ICRhZGRUb1NldDogeyBwbGF5ZXJzOiBwbGF5ZXJJZCB9IH0sXHJcbiAgICAgICAgICAgIHsgbmV3OiB0cnVlIH0gXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgaWYgKCFnYW1lKSB7XHJcbiAgICAgICAgICAgIGdhbWUgPSBhd2FpdCBNYXRjaE1vZGVsLmZpbmRPbmUoeyBtYXRjaElkIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKCFnYW1lKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IDQwNCwgYm9keTogeyBlcnJvcjogXCJNYXRjaCBub3QgZm91bmRcIiB9IH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGlzQWxyZWFkeUluID0gZ2FtZS5wbGF5ZXJzLmluY2x1ZGVzKHBsYXllcklkKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICghaXNBbHJlYWR5SW4pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogNDAwLCBib2R5OiB7IGVycm9yOiBgQ2Fubm90IGpvaW4uIE1hdGNoIGlzICR7Z2FtZS5zdGF0dXN9YCB9IH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHByb2JsZW0gPSBhd2FpdCBRdWVzdGlvbi5maW5kQnlJZChnYW1lLnByb2JsZW1JZCk7XHJcbiAgICAgICAgbG9nZ2VyLmluZm8oYERCOiBQbGF5ZXIgJHtwbGF5ZXJJZH0gYWN0aXZlIGluICR7bWF0Y2hJZH1gKTtcclxuICAgICAgICBcclxuICAgICAgICBhd2FpdCBlbWl0KHsgdG9waWM6ICdwbGF5ZXIuam9pbmVkJywgZGF0YTogeyBtYXRjaElkLCBwbGF5ZXJJZCB9IH0pO1xyXG5cclxuICAgICAgICBpZiAoc3RyZWFtcz8ubWF0Y2gpIHtcclxuICAgICAgICAgICAgYXdhaXQgc3RyZWFtcy5tYXRjaC5zZXQobWF0Y2hJZCwgJ21lc3NhZ2UnLCB7IFxyXG4gICAgICAgICAgICAgICAgdHlwZTogJ1BMQVlFUl9KT0lORUQnLCBcclxuICAgICAgICAgICAgICAgIHBsYXllcklkOiBwbGF5ZXJJZCxcclxuICAgICAgICAgICAgICAgIHBsYXllcnM6IGdhbWUucGxheWVyc1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHsgXHJcbiAgICAgICAgICAgIHN0YXR1czogMjAwLCBcclxuICAgICAgICAgICAgYm9keTogeyBcclxuICAgICAgICAgICAgICAgIG1zZzogXCJKb2luZWRcIiwgXHJcbiAgICAgICAgICAgICAgICBzdGF0ZTogZ2FtZSxcclxuICAgICAgICAgICAgICAgIGR1cmF0aW9uTXM6IGdhbWUuZHVyYXRpb24sIFxyXG4gICAgICAgICAgICAgICAgcHJvYmxlbTogeyB0aXRsZTogcHJvYmxlbT8udGl0bGUsIGRlc2NyaXB0aW9uOiBwcm9ibGVtPy5kZXNjcmlwdGlvbiB9IFxyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGFjdGlvbiA9PT0gJ3N1Ym1pdCcgfHwgYWN0aW9uID09PSAncnVuJykge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3RUeXBlID0gcmVxLmJvZHk/LnR5cGUgfHwgKGFjdGlvbiA9PT0gJ3J1bicgPyAnUlVOX1RFU1RTJyA6ICdTVUJNSVRfU09MVVRJT04nKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBtYXRjaCA9IGF3YWl0IE1hdGNoTW9kZWwuZmluZE9uZSh7IG1hdGNoSWQgfSk7XHJcbiAgICAgICAgaWYgKCFtYXRjaCkgcmV0dXJuIHsgc3RhdHVzOiA0MDQsIGJvZHk6IHsgZXJyb3I6IFwiTWF0Y2ggbm90IGZvdW5kXCIgfSB9O1xyXG5cclxuICAgICAgICBpZiAocmVxdWVzdFR5cGUgPT09ICdTVUJNSVRfU09MVVRJT04nICYmIG1hdGNoLnN0YXR1cyAhPT0gJ1JBQ0lORycpIHtcclxuICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogNDAwLCBib2R5OiB7IGVycm9yOiBgQ2Fubm90IHN1Ym1pdC4gTWF0Y2ggaXMgJHttYXRjaC5zdGF0dXN9YCB9IH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBqb2JEYXRhOiBSdW5uZXJSZXF1ZXN0ID0geyBcclxuICAgICAgICAgICAgbWF0Y2hJZCwgXHJcbiAgICAgICAgICAgIHBsYXllcklkLCBcclxuICAgICAgICAgICAgY29kZSwgXHJcbiAgICAgICAgICAgIGFjdGlvbjogcmVxdWVzdFR5cGUsXHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgbGFuZ3VhZ2U6IGxhbmd1YWdlIHx8ICdweXRob24nLCBcclxuICAgICAgICAgICAgdmVyc2lvbjogJzMuMTAuMCdcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxvZ2dlci5pbmZvKGBBUEk6IFF1ZXVlaW5nICR7cmVxdWVzdFR5cGV9IGZvciAke3BsYXllcklkfWApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGF3YWl0IGVtaXQoeyB0b3BpYzogJ3J1bi5jb2RlJywgZGF0YTogam9iRGF0YSB9KTtcclxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IDIwMCwgYm9keTogeyBtc2c6IFwiQ29kZSBxdWV1ZWRcIiB9IH07XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGFjdGlvbiA9PT0gJ2FuYWx5emUnKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb2RlLCBsYW5ndWFnZSwgcHJvYmxlbVRpdGxlIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICAgICAgaWYgKCFjb2RlKSB7XHJcbiAgICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IDQwMCwgYm9keTogeyBlcnJvcjogXCJObyBjb2RlIHByb3ZpZGVkIGZvciBhbmFseXNpcy5cIiB9IH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhd2FpdCBlbWl0KHsgXHJcbiAgICAgICAgICAgIHRvcGljOiAnYW5hbHl6ZS5jb2RlJywgXHJcbiAgICAgICAgICAgIGRhdGE6IHsgXHJcbiAgICAgICAgICAgICAgICBtYXRjaElkLFxyXG4gICAgICAgICAgICAgICAgcGxheWVySWQsXHJcbiAgICAgICAgICAgICAgICBjb2RlLFxyXG4gICAgICAgICAgICAgICAgbGFuZ3VhZ2U6IGxhbmd1YWdlIHx8ICdweXRob24nLFxyXG4gICAgICAgICAgICAgICAgcHJvYmxlbVRpdGxlOiBwcm9ibGVtVGl0bGUgfHwgJ1Vua25vd24gUHJvYmxlbSdcclxuICAgICAgICAgICAgfSBcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHsgXHJcbiAgICAgICAgICAgIHN0YXR1czogMjAwLCBcclxuICAgICAgICAgICAgYm9keTogeyBtc2c6IFwiQW5hbHlzaXMgc3RhcnRlZC4gV2F0Y2ggdGhlIHN0cmVhbSBmb3IgcmVzdWx0cy5cIiB9IFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgc3RhdHVzOiA0MDAsIGJvZHk6IHsgZXJyb3I6IFwiSW52YWxpZCBBY3Rpb25cIiB9IH07XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgIGxvZ2dlci5lcnJvcihcIkFQSSBFcnJvclwiLCBlcnJvcik7XHJcbiAgICByZXR1cm4geyBzdGF0dXM6IDUwMCwgYm9keTogeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9IH07XHJcbiAgfVxyXG59OyJdLAogICJtYXBwaW5ncyI6ICJBQUNBLFNBQVMsaUJBQWlCO0FBQzFCLFNBQVMsa0JBQWtCO0FBRTNCLE9BQU8sY0FBYztBQUVkLE1BQU0sU0FBcUI7QUFBQSxFQUNoQyxNQUFNO0FBQUEsRUFDTixNQUFNO0FBQUEsRUFDTixNQUFNO0FBQUEsRUFDTixRQUFRO0FBQUEsRUFDUixPQUFPLENBQUMsaUJBQWlCLFlBQVksY0FBYztBQUFBLEVBQ25ELE9BQU8sQ0FBQyxjQUFjO0FBQ3hCO0FBRU8sTUFBTSxVQUFVLE9BQU8sS0FBVSxZQUFpQjtBQUN2RCxRQUFNLEVBQUUsTUFBTSxRQUFRLFFBQVEsSUFBSTtBQUNsQyxRQUFNLFVBQVU7QUFFaEIsTUFBSTtBQUNGLFVBQU0sU0FBUyxJQUFJLFFBQVEsVUFBVSxJQUFJLFlBQVk7QUFDckQsVUFBTSxFQUFFLFVBQVUsU0FBUyxNQUFNLFVBQVUsS0FBSyxJQUFJLElBQUksUUFBUSxDQUFDO0FBRWpFLFFBQUksV0FBVyxVQUFVO0FB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YztBQUV4RSxZQUFNLFFBQVEsTUFBTSxXQUFXLFFBQVEsRUFBRSxRQUFRLENBQUM7QUFDbEQsVUFBSSxDQUFDLE1BQU8sUUFBTyxFQUFFLFFBQVEsS0FBSyxNQUFNLEVBQUUsT0FBTyxrQkFBa0IsRUFBRTtBQUVyRSxVQUFJLGdCQUFnQixxQkFBcUIsTUFBTSxXQUFXLFVBQVU7QUFDL0QsZUFBTyxFQUFFLFFBQVEsS0FBSyxNQUFNLEVBQUUsT0FBTywyQkFBMkIsTUFBTSxNQUFNLEdBQUcsRUFBRTtBQUFBLE1BQ3RGO0FBRUEsWUFBTSxVQUF5QjtBQUFBLFFBQzNCO0FBQUEsUUFDQTtBQUFBLFFBQ0E7QUFBQSxRQUNBLFFBQVE7QUFBQTtBQUFBLFFBRVIsVUFBVSxZQUFZO0FBQUEsUUFDdEIsU0FBUztBQUFBLE1BQ2I7QUFFQSxhQUFPLEtBQUssaUJBQWlCLFdBQVcsUUFBUSxRQUFRLEVBQUU7QUFFMUQsWUFBTSxLQUFLLEVBQUUsT0FBTyxZQUFZLE1BQU0sUUFBUSxDQUFDO0FBQy9DLGFBQU8sRUFBRSxRQUFRLEtBQUssTUFBTSxFQUFFLEtBQUssY0FBYyxFQUFFO0FBQUEsSUFDdkQ7QUFFQSxRQUFJLFdBQVcsV0FBVztBQUN0QixZQUFNLEVBQUUsTUFBQUEsT0FBTSxVQUFBQyxXQUFVLGFBQWEsSUFBSSxJQUFJO0FBRTdDLFVBQUksQ0FBQ0QsT0FBTTtBQUNOLGVBQU8sRUFBRSxRQUFRLEtBQUssTUFBTSxFQUFFLE9BQU8saUNBQWlDLEVBQUU7QUFBQSxNQUM3RTtBQUVBLFlBQU0sS0FBSztBQUFBLFFBQ1AsT0FBTztBQUFBLFFBQ1AsTUFBTTtBQUFBLFVBQ0Y7QUFBQSxVQUNBO0FBQUEsVUFDQSxNQUFBQTtBQUFBLFVBQ0EsVUFBVUMsYUFBWTtBQUFBLFVBQ3RCLGNBQWMsZ0JBQWdCO0FBQUEsUUFDbEM7QUFBQSxNQUNKLENBQUM7QUFFRCxhQUFPO0FBQUEsUUFDSCxRQUFRO0FBQUEsUUFDUixNQUFNLEVBQUUsS0FBSyxrREFBa0Q7QUFBQSxNQUNuRTtBQUFBLElBQ0o7QUFFQSxXQUFPLEVBQUUsUUFBUSxLQUFLLE1BQU0sRUFBRSxPQUFPLGlCQUFpQixFQUFFO0FBQUEsRUFFMUQsU0FBUyxPQUFZO0FBQ25CLFdBQU8sTUFBTSxhQUFhLEtBQUs7QUFDL0IsV0FBTyxFQUFFLFFBQVEsS0FBSyxNQUFNLEVBQUUsT0FBTyxNQUFNLFFBQVEsRUFBRTtBQUFBLEVBQ3ZEO0FBQ0Y7IiwKICAibmFtZXMiOiBbImNvZGUiLCAibGFuZ3VhZ2UiXQp9Cg==
