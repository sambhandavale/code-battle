import { connectDB } from "../src/db.js";
import { MatchModel } from "../src/models/Match.js";
import Question from "../src/models/Question.js";
const config = {
  name: "MatchAPI",
  type: "api",
  path: "/match/:action",
  method: "POST",
  emits: ["player.joined", "run.code", "analyze.code"],
  flows: ["CodeDuelFlow"]
};
const handler = async (req, context) => {
  const { emit, logger, streams } = context;
  await connectDB();
  try {
    const action = req.params?.action || req.pathParams?.action;
    const { playerId, matchId, code, language, time } = req.body || {};
    if (action === "create") {
      const newMatchId = matchId || `match_${Date.now()}`;
      let validDuration = 5;
      if (time && [5, 10, 20].includes(time)) {
        validDuration = time;
      }
      const durationMs = validDuration * 60 * 1e3;
      const count = await Question.countDocuments({ time: validDuration });
      if (count === 0) {
        return { status: 500, body: { error: `No questions found for ${validDuration} mins.` } };
      }
      const random = Math.floor(Math.random() * count);
      const randomQuestion = await Question.findOne({ time: validDuration }).skip(random);
      if (!randomQuestion) {
        return { status: 500, body: { error: "Error fetching question." } };
      }
      logger.info(`Creating Match ${newMatchId} with problem: ${randomQuestion.title}`);
      await MatchModel.create({
        matchId: newMatchId,
        players: [playerId],
        status: "WAITING",
        problemId: randomQuestion._id.toString(),
        duration: durationMs
      });
      return {
        status: 200,
        body: {
          matchId: newMatchId,
          msg: "Match Created",
          durationMinutes: validDuration,
          problemTitle: randomQuestion.title
        }
      };
    }
    if (action === "join") {
      const game = await MatchModel.findOne({ matchId });
      if (!game) return { status: 404, body: { error: "Match not found" } };
      if (!game.players.includes(playerId)) {
        game.players.push(playerId);
        await game.save();
      }
      const problem = await Question.findById(game.problemId);
      logger.info(`DB: Added player ${playerId} to ${matchId}`);
      await emit({ topic: "player.joined", data: { matchId, playerId } });
      if (streams?.match) {
        await streams.match.set(matchId, "message", {
          type: "PLAYER_JOINED",
          playerId,
          players: game.players
        });
      }
      return {
        status: 200,
        body: {
          msg: "Joined",
          state: game,
          durationMs: game.duration,
          problem: { title: problem?.title, description: problem?.description }
        }
      };
    }
    if (action === "submit" || action === "run") {
      const requestType = req.body?.type || (action === "run" ? "RUN_TESTS" : "SUBMIT_SOLUTION");
      const match = await MatchModel.findOne({ matchId });
      if (!match) return { status: 404, body: { error: "Match not found" } };
      if (requestType === "SUBMIT_SOLUTION" && match.status !== "RACING") {
        return { status: 400, body: { error: `Cannot submit. Match is ${match.status}` } };
      }
      const jobData = {
        matchId,
        playerId,
        code,
        action: requestType,
        // @ts-ignore
        language: language || "python",
        version: "3.10.0"
      };
      logger.info(`API: Queueing ${requestType} for ${playerId}`);
      await emit({ topic: "run.code", data: jobData });
      return { status: 200, body: { msg: "Code queued" } };
    }
    if (action === "analyze") {
      const { code: code2, language: language2, problemTitle } = req.body;
      if (!code2) {
        return { status: 400, body: { error: "No code provided for analysis." } };
      }
      await emit({
        topic: "analyze.code",
        data: {
          matchId,
          // Optional: if you want to broadcast to the match room
          playerId,
          // The user asking for help
          code: code2,
          language: language2 || "python",
          problemTitle: problemTitle || "Unknown Problem"
        }
      });
      return {
        status: 200,
        body: { msg: "Analysis started. Watch the stream for results." }
      };
    }
    return { status: 400, body: { error: "Invalid Action" } };
  } catch (error) {
    logger.error("API Error", error);
    return { status: 500, body: { error: error.message } };
  }
};
export {
  config,
  handler
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vbWF0Y2gtYXBpLnN0ZXAudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IFN0ZXBDb25maWcgfSBmcm9tICdtb3RpYSc7XHJcbmltcG9ydCB7IGNvbm5lY3REQiB9IGZyb20gJy4uL3NyYy9kYic7XHJcbmltcG9ydCB7IE1hdGNoTW9kZWwgfSBmcm9tICcuLi9zcmMvbW9kZWxzL01hdGNoJztcclxuaW1wb3J0IHsgUnVubmVyUmVxdWVzdCB9IGZyb20gJy4uL3NyYy90eXBlcyc7XHJcbmltcG9ydCBRdWVzdGlvbiBmcm9tICcuLi9zcmMvbW9kZWxzL1F1ZXN0aW9uJztcclxuXHJcbmV4cG9ydCBjb25zdCBjb25maWc6IFN0ZXBDb25maWcgPSB7XHJcbiAgbmFtZTogJ01hdGNoQVBJJyxcclxuICB0eXBlOiAnYXBpJyxcclxuICBwYXRoOiAnL21hdGNoLzphY3Rpb24nLFxyXG4gIG1ldGhvZDogJ1BPU1QnLFxyXG4gIGVtaXRzOiBbJ3BsYXllci5qb2luZWQnLCAncnVuLmNvZGUnLCAnYW5hbHl6ZS5jb2RlJ10sXHJcbiAgZmxvd3M6IFsnQ29kZUR1ZWxGbG93J11cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBoYW5kbGVyID0gYXN5bmMgKHJlcTogYW55LCBjb250ZXh0OiBhbnkpID0+IHtcclxuICBjb25zdCB7IGVtaXQsIGxvZ2dlciwgc3RyZWFtcyB9ID0gY29udGV4dDtcclxuICBhd2FpdCBjb25uZWN0REIoKTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGFjdGlvbiA9IHJlcS5wYXJhbXM/LmFjdGlvbiB8fCByZXEucGF0aFBhcmFtcz8uYWN0aW9uO1xyXG4gICAgY29uc3QgeyBwbGF5ZXJJZCwgbWF0Y2hJZCwgY29kZSwgbGFuZ3VhZ2UsIHRpbWUgfSA9IHJlcS5ib2R5IHx8IHt9O1xyXG5cclxuICAgIC8vIC0tLSBDUkVBVEUgTUFUQ0ggLS0tXHJcbiAgICBpZiAoYWN0aW9uID09PSAnY3JlYXRlJykge1xyXG4gICAgICAgIGNvbnN0IG5ld01hdGNoSWQgPSBtYXRjaElkIHx8IGBtYXRjaF8ke0RhdGUubm93KCl9YDtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgdmFsaWREdXJhdGlvbiA9IDU7XHJcbiAgICAgICAgaWYgKHRpbWUgJiYgWzUsIDEwLCAyMF0uaW5jbHVkZXModGltZSkpIHtcclxuICAgICAgICAgICAgdmFsaWREdXJhdGlvbiA9IHRpbWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGR1cmF0aW9uTXMgPSB2YWxpZER1cmF0aW9uICogNjAgKiAxMDAwO1xyXG5cclxuICAgICAgICBjb25zdCBjb3VudCA9IGF3YWl0IFF1ZXN0aW9uLmNvdW50RG9jdW1lbnRzKHsgdGltZTogdmFsaWREdXJhdGlvbiB9KTtcclxuICAgICAgICBpZiAoY291bnQgPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiA1MDAsIGJvZHk6IHsgZXJyb3I6IGBObyBxdWVzdGlvbnMgZm91bmQgZm9yICR7dmFsaWREdXJhdGlvbn0gbWlucy5gIH0gfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHJhbmRvbSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNvdW50KTtcclxuICAgICAgICBjb25zdCByYW5kb21RdWVzdGlvbiA9IGF3YWl0IFF1ZXN0aW9uLmZpbmRPbmUoeyB0aW1lOiB2YWxpZER1cmF0aW9uIH0pLnNraXAocmFuZG9tKTtcclxuXHJcbiAgICAgICAgaWYgKCFyYW5kb21RdWVzdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IDUwMCwgYm9keTogeyBlcnJvcjogXCJFcnJvciBmZXRjaGluZyBxdWVzdGlvbi5cIiB9IH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsb2dnZXIuaW5mbyhgQ3JlYXRpbmcgTWF0Y2ggJHtuZXdNYXRjaElkfSB3aXRoIHByb2JsZW06ICR7cmFuZG9tUXVlc3Rpb24udGl0bGV9YCk7XHJcblxyXG4gICAgICAgIGF3YWl0IE1hdGNoTW9kZWwuY3JlYXRlKHtcclxuICAgICAgICAgICAgbWF0Y2hJZDogbmV3TWF0Y2hJZCxcclxuICAgICAgICAgICAgcGxheWVyczogW3BsYXllcklkXSxcclxuICAgICAgICAgICAgc3RhdHVzOiAnV0FJVElORycsXHJcbiAgICAgICAgICAgIHByb2JsZW1JZDogcmFuZG9tUXVlc3Rpb24uX2lkLnRvU3RyaW5nKCksXHJcbiAgICAgICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbk1zXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHsgXHJcbiAgICAgICAgICAgIHN0YXR1czogMjAwLCBcclxuICAgICAgICAgICAgYm9keTogeyBcclxuICAgICAgICAgICAgICAgIG1hdGNoSWQ6IG5ld01hdGNoSWQsIFxyXG4gICAgICAgICAgICAgICAgbXNnOiBcIk1hdGNoIENyZWF0ZWRcIiwgXHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbk1pbnV0ZXM6IHZhbGlkRHVyYXRpb24sXHJcbiAgICAgICAgICAgICAgICBwcm9ibGVtVGl0bGU6IHJhbmRvbVF1ZXN0aW9uLnRpdGxlIFxyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tIEpPSU4gTUFUQ0ggLS0tXHJcbiAgICBpZiAoYWN0aW9uID09PSAnam9pbicpIHtcclxuICAgICAgICBjb25zdCBnYW1lID0gYXdhaXQgTWF0Y2hNb2RlbC5maW5kT25lKHsgbWF0Y2hJZCB9KTtcclxuICAgICAgICBpZiAoIWdhbWUpIHJldHVybiB7IHN0YXR1czogNDA0LCBib2R5OiB7IGVycm9yOiBcIk1hdGNoIG5vdCBmb3VuZFwiIH0gfTtcclxuXHJcbiAgICAgICAgaWYgKCFnYW1lLnBsYXllcnMuaW5jbHVkZXMocGxheWVySWQpKSB7XHJcbiAgICAgICAgICAgIGdhbWUucGxheWVycy5wdXNoKHBsYXllcklkKTtcclxuICAgICAgICAgICAgYXdhaXQgZ2FtZS5zYXZlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBwcm9ibGVtID0gYXdhaXQgUXVlc3Rpb24uZmluZEJ5SWQoZ2FtZS5wcm9ibGVtSWQpO1xyXG4gICAgICAgIGxvZ2dlci5pbmZvKGBEQjogQWRkZWQgcGxheWVyICR7cGxheWVySWR9IHRvICR7bWF0Y2hJZH1gKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBOb3RpZnkgRW5naW5lXHJcbiAgICAgICAgYXdhaXQgZW1pdCh7IHRvcGljOiAncGxheWVyLmpvaW5lZCcsIGRhdGE6IHsgbWF0Y2hJZCwgcGxheWVySWQgfSB9KTtcclxuXHJcbiAgICAgICAgaWYgKHN0cmVhbXM/Lm1hdGNoKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHN0cmVhbXMubWF0Y2guc2V0KG1hdGNoSWQsICdtZXNzYWdlJywgeyBcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdQTEFZRVJfSk9JTkVEJywgXHJcbiAgICAgICAgICAgICAgICBwbGF5ZXJJZDogcGxheWVySWQsXHJcbiAgICAgICAgICAgICAgICBwbGF5ZXJzOiBnYW1lLnBsYXllcnNcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiB7IFxyXG4gICAgICAgICAgICBzdGF0dXM6IDIwMCwgXHJcbiAgICAgICAgICAgIGJvZHk6IHsgXHJcbiAgICAgICAgICAgICAgICBtc2c6IFwiSm9pbmVkXCIsIFxyXG4gICAgICAgICAgICAgICAgc3RhdGU6IGdhbWUsXHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbk1zOiBnYW1lLmR1cmF0aW9uLCBcclxuICAgICAgICAgICAgICAgIHByb2JsZW06IHsgdGl0bGU6IHByb2JsZW0/LnRpdGxlLCBkZXNjcmlwdGlvbjogcHJvYmxlbT8uZGVzY3JpcHRpb24gfSBcclxuICAgICAgICAgICAgfSBcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLSBTVUJNSVQgLyBSVU4gLS0tXHJcbiAgICBpZiAoYWN0aW9uID09PSAnc3VibWl0JyB8fCBhY3Rpb24gPT09ICdydW4nKSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdFR5cGUgPSByZXEuYm9keT8udHlwZSB8fCAoYWN0aW9uID09PSAncnVuJyA/ICdSVU5fVEVTVFMnIDogJ1NVQk1JVF9TT0xVVElPTicpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IG1hdGNoID0gYXdhaXQgTWF0Y2hNb2RlbC5maW5kT25lKHsgbWF0Y2hJZCB9KTtcclxuICAgICAgICBpZiAoIW1hdGNoKSByZXR1cm4geyBzdGF0dXM6IDQwNCwgYm9keTogeyBlcnJvcjogXCJNYXRjaCBub3QgZm91bmRcIiB9IH07XHJcblxyXG4gICAgICAgIC8vIFZhbGlkYXRpb246IE9ubHkgYWxsb3cgU1VCTUlUIGlmIFJBQ0lORy4gKFJ1biBpcyBhbGxvd2VkIGZvciBwcmFjdGljZSlcclxuICAgICAgICBpZiAocmVxdWVzdFR5cGUgPT09ICdTVUJNSVRfU09MVVRJT04nICYmIG1hdGNoLnN0YXR1cyAhPT0gJ1JBQ0lORycpIHtcclxuICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogNDAwLCBib2R5OiB7IGVycm9yOiBgQ2Fubm90IHN1Ym1pdC4gTWF0Y2ggaXMgJHttYXRjaC5zdGF0dXN9YCB9IH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBqb2JEYXRhOiBSdW5uZXJSZXF1ZXN0ID0geyBcclxuICAgICAgICAgICAgbWF0Y2hJZCwgXHJcbiAgICAgICAgICAgIHBsYXllcklkLCBcclxuICAgICAgICAgICAgY29kZSwgXHJcbiAgICAgICAgICAgIGFjdGlvbjogcmVxdWVzdFR5cGUsXHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgbGFuZ3VhZ2U6IGxhbmd1YWdlIHx8ICdweXRob24nLCBcclxuICAgICAgICAgICAgdmVyc2lvbjogJzMuMTAuMCdcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxvZ2dlci5pbmZvKGBBUEk6IFF1ZXVlaW5nICR7cmVxdWVzdFR5cGV9IGZvciAke3BsYXllcklkfWApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGF3YWl0IGVtaXQoeyB0b3BpYzogJ3J1bi5jb2RlJywgZGF0YTogam9iRGF0YSB9KTtcclxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IDIwMCwgYm9keTogeyBtc2c6IFwiQ29kZSBxdWV1ZWRcIiB9IH07XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGFjdGlvbiA9PT0gJ2FuYWx5emUnKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb2RlLCBsYW5ndWFnZSwgcHJvYmxlbVRpdGxlIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICAgICAgaWYgKCFjb2RlKSB7XHJcbiAgICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IDQwMCwgYm9keTogeyBlcnJvcjogXCJObyBjb2RlIHByb3ZpZGVkIGZvciBhbmFseXNpcy5cIiB9IH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBFbWl0IGFuIGV2ZW50IHRvIHRyaWdnZXIgdGhlIEFJIFdvcmtlclxyXG4gICAgICAgIC8vIFdlIGRvbid0IHdhaXQgZm9yIHRoZSBBSSBoZXJlIChpdCdzIGFzeW5jKS4gV2UganVzdCBzYXkgXCJBbmFseXNpcyBTdGFydGVkXCIuXHJcbiAgICAgICAgYXdhaXQgZW1pdCh7IFxyXG4gICAgICAgICAgICB0b3BpYzogJ2FuYWx5emUuY29kZScsIFxyXG4gICAgICAgICAgICBkYXRhOiB7IFxyXG4gICAgICAgICAgICAgICAgbWF0Y2hJZCwgLy8gT3B0aW9uYWw6IGlmIHlvdSB3YW50IHRvIGJyb2FkY2FzdCB0byB0aGUgbWF0Y2ggcm9vbVxyXG4gICAgICAgICAgICAgICAgcGxheWVySWQsIC8vIFRoZSB1c2VyIGFza2luZyBmb3IgaGVscFxyXG4gICAgICAgICAgICAgICAgY29kZSxcclxuICAgICAgICAgICAgICAgIGxhbmd1YWdlOiBsYW5ndWFnZSB8fCAncHl0aG9uJyxcclxuICAgICAgICAgICAgICAgIHByb2JsZW1UaXRsZTogcHJvYmxlbVRpdGxlIHx8ICdVbmtub3duIFByb2JsZW0nXHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7IFxyXG4gICAgICAgICAgICBzdGF0dXM6IDIwMCwgXHJcbiAgICAgICAgICAgIGJvZHk6IHsgbXNnOiBcIkFuYWx5c2lzIHN0YXJ0ZWQuIFdhdGNoIHRoZSBzdHJlYW0gZm9yIHJlc3VsdHMuXCIgfSBcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IHN0YXR1czogNDAwLCBib2R5OiB7IGVycm9yOiBcIkludmFsaWQgQWN0aW9uXCIgfSB9O1xyXG5cclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBsb2dnZXIuZXJyb3IoXCJBUEkgRXJyb3JcIiwgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHsgc3RhdHVzOiA1MDAsIGJvZHk6IHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSB9O1xyXG4gIH1cclxufTsiXSwKICAibWFwcGluZ3MiOiAiQUFDQSxTQUFTLGlCQUFpQjtBQUMxQixTQUFTLGtCQUFrQjtBQUUzQixPQUFPLGNBQWM7QUFFZCxNQUFNLFNBQXFCO0FBQUEsRUFDaEMsTUFBTTtBQUFBLEVBQ04sTUFBTTtBQUFBLEVBQ04sTUFBTTtBQUFBLEVBQ04sUUFBUTtBQUFBLEVBQ1IsT0FBTyxDQUFDLGlCQUFpQixZQUFZLGNBQWM7QUFBQSxFQUNuRCxPQUFPLENBQUMsY0FBYztBQUN4QjtBQUVPLE1BQU0sVUFBVSxPQUFPLEtBQVUsWUFBaUI7QUFDdkQsUUFBTSxFQUFFLE1BQU0sUUFBUSxRQUFRLElBQUk7QUFDbEMsUUFBTSxVQUFVO0FBRWhCLE1BQUk7QUFDRixVQUFNLFNBQVMsSUFBSSxRQUFRLFVBQVUsSUFBSSxZQUFZO0FBQ3JELFVBQU0sRUFBRSxVQUFVLFNBQVMsTUFBTSxVQUFVLEtBQUssSUFB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
